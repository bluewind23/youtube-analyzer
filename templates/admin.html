{% extends "base.html" %}
{% block content %}
  <div class="max-w-4xl mx-auto py-16">
    <h2 class="text-xl font-bold mb-6">API 키 관리</h2>
    <div class="mb-8">
      <form method="post" action="/admin/add-key" class="flex gap-4">
        <input type="text" name="new_key" placeholder="새 API 키 입력" class="flex-grow px-4 py-2 border rounded" required>
        <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">추가</button>
      </form>
    </div>
    <table class="w-full text-sm border">
      <thead class="bg-gray-100">
        <tr>
          <th class="py-2 px-4 border">순번</th>
          <th class="py-2 px-4 border">API 키</th>
          <th class="py-2 px-4 border">유효 여부</th>
          <th class="py-2 px-4 border">삭제</th>
        </tr>
      </thead>
      <tbody>
        {% for idx, key in enumerate(api_keys) %}
          <tr class="text-center">
            <td class="py-2 px-4 border">{{ idx + 1 }}</td>
            <td class="py-2 px-4 border">{{ key }}</td>
            <td class="py-2 px-4 border">{{ validities[idx] }}</td>
            <td class="py-2 px-4 border">
              <form method="post" action="/admin/delete-key" class="inline">
                <input type="hidden" name="delete_key" value="{{ key }}">
                <button type="submit" class="text-red-600 hover:underline">삭제</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
