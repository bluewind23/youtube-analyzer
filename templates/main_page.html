<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ settings.title_text }}</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%234F46E5%22></rect><polygon points=%2240,30 70,50 40,70%22 fill=%22%23ffffff%22></polygon></svg>">
    <meta name="description" content="í‚¤ì›Œë“œë¡œ ìœ íŠœë¸Œ ì˜ìƒì„ ë¶„ì„í•˜ê³ , LVR/CVR ì§€í‘œë¥¼ í†µí•´ ì¸ê¸°ìˆëŠ” ì½˜í…ì¸  ì•„ì´ë””ì–´ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.">
    <meta name="keywords" content="ìœ íŠœë¸Œ, ìœ íŠœë¸Œ ë¶„ì„, ì˜ìƒ ë¶„ì„, í‚¤ì›Œë“œ ë¶„ì„, LVR, CVR, ì‡¼ì¸ , ì½˜í…ì¸ ">
    <meta property="og:title" content="{{ settings.title_text }}">
    <meta property="og:description" content="í‚¤ì›Œë“œë¡œ ìœ íŠœë¸Œ ì˜ìƒì„ ë¶„ì„í•˜ê³ , LVR/CVR ì§€í‘œë¥¼ í†µí•´ ì¸ê¸°ìˆëŠ” ì½˜í…ì¸  ì•„ì´ë””ì–´ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.">
    <meta property="og:image" content="{{ url_for('static', filename='images/og_default.png', _external=True) }}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:type" content="website">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-xxxxxxxxxxxxxxxx"
        crossorigin="anonymous"></script>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

        :root {
            --primary-color: #4F46E5;
            --secondary-color: #10B981;
            --bg-color: #F1F5F9;
            --card-bg-color: #ffffff;
            --text-color: #4B5563;
            --subtle-text-color: #6B7280;
            --border-color: #E5E7EB;
            --sorted-col-bg: #EEF2FF;
            --error-color: #d63031;
        }

        html,
        body {
            height: 100%;
            margin: 0;
        }

        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0 0 0;
            box-sizing: border-box;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: var(--card-bg-color);
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
            width: 95%;
            flex-grow: 1;
        }

        h2 {
            font-size: 32px;
            font-weight: 800;
            text-align: center;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 0;
            margin-bottom: 30px;
        }

        h2 a {
            text-decoration: none;
            color: inherit;
            display: flex;
            align-items: center;
        }

        h2 img {
            max-height: 40px;
            width: auto;
        }

        .search-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .controls {
            display: flex;
            gap: 10px;
        }

        input,
        select,
        button {
            font-family: inherit;
            font-size: 16px;
            padding: 10px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            outline: none;
            transition: all 0.2s;
        }

        input[type="text"] {
            flex-grow: 1;
        }

        input[type="text"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, .15);
        }

        #apiKeyInput {
            text-align: center;
        }

        #apiKeyInput::placeholder {
            text-align: center;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }

        button:disabled {
            background-color: #e9ecef;
            color: #adb5bd;
            cursor: not-allowed;
        }

        .button-secondary {
            background-color: var(--subtle-text-color);
        }

        .history-tag {
            display: inline-block;
            background-color: #eef2f6;
            padding: 4px 12px;
            border-radius: 15px;
            margin: 4px;
            font-size: 13px;
            cursor: pointer;
        }

        .search-history {
            margin-top: 10px;
            min-height: 28px;
            text-align: center;
        }

        .api-explainer {
            font-size: 14px;
            color: var(--subtle-text-color);
            margin-top: 20px;
            background-color: #F9FAFB;
            padding: 15px 25px;
            margin-bottom: 25px;
            border-radius: 12px;
            border: 1px solid #dfe4ea;
            line-height: 1.8;
            text-align: center;
        }

        .api-explainer p {
            margin: 4px 0;
        }

        .api-explainer p a,
        .error-modal-body p a {
            color: var(--primary-color);
            font-weight: 600;
            text-decoration: none;
        }

        .api-explainer p a:hover,
        .error-modal-body p a:hover {
            text-decoration: underline;
        }

        .api-explainer strong {
            color: var(--text-color);
            font-weight: 600;
        }

        #pre-search-ad-container,
        .ad-container {
            width: 100%;
            min-height: 90px;
            background-color: #f0f2f5;
            border: 1px dashed var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: var(--subtle-text-color);
            box-sizing: border-box;
        }

        #pre-search-ad-container {
            display: none;
            margin: 25px auto;
            width: 728px;
            height: 90px;
        }

        .ad-container {
            margin: 10px 0;
        }

        #results-container.grid-view .ad-card {
            grid-column: 1 / -1;
        }

        .ad-row .ad-cell {
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .ad-row .ad-container {
            margin: 0;
        }

        .filter-controls {
            display: none;
            justify-content: flex-end;
            align-items: center;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .category-filters {
            display: none;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px 6px;
        }

        #category-filters-container {
            margin-top: 85px;
            margin-bottom: 20px;
        }

        .category-btn {
            background: #eef2f6;
            color: var(--subtle-text-color);
            border: 1px solid var(--border-color);
            padding: 6px 14px;
            margin: 0;
            border-radius: 15px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .category-btn:hover {
            background: #dcebfd;
        }

        .category-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .filter-controls .right {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .filter-controls .right span,
        .filter-controls .right select {
            font-size: 13px;
        }

        .filter-controls .right select {
            width: auto;
            min-width: 90px;
            padding: 8px 28px 8px 12px;
            -webkit-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
        }

        #view-toggle-btn {
            background: none;
            border: 1px solid var(--border-color);
            width: 36px;
            height: 36px;
            padding: 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
        }

        #view-toggle-btn svg {
            width: 22px;
            height: 22px;
            fill: #6b7280;
        }

        #results-container {
            overflow-x: auto;
            text-align: left;
        }

        #results-container.grid-view {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            overflow-x: hidden;
        }

        .grid-view .video-card {
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            background-color: var(--card-bg-color);
        }

        .grid-view .video-card .thumbnail-container {
            width: 100%;
            height: auto;
            padding-top: 56.25%;
            position: relative;
            flex-shrink: 0;
        }

        .grid-view .video-card .thumbnail-container img {
            position: absolute;
            top: 0;
            left: 0;
        }

        .grid-view .video-card .info-main {
            flex-grow: 1;
            text-align: left;
            padding: 12px;
        }

        .grid-view .video-card .video-title {
            white-space: normal;
            height: 42px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .grid-view .video-card .stat-grid {
            display: flex;
            justify-content: space-around;
            font-size: 13px;
            padding: 8px 12px;
            border-top: 1px solid var(--border-color);
            text-align: center;
            color: var(--subtle-text-color);
        }

        .grid-view .video-card .stat-grid b {
            color: var(--text-color);
        }

        .download-icon-grid {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
            opacity: 0;
        }

        .video-card:hover .download-icon-grid {
            opacity: 1;
        }

        .download-icon-grid:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .download-icon-grid svg {
            width: 18px;
            height: 18px;
            fill: #ffffff;
        }

        #results-container .loader {
            display: block;
            text-align: center;
            padding: 100px 0;
            font-size: 20px;
            font-weight: 500;
            grid-column: 1 / -1;
        }

        .loader-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 15px auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        #results-container .message {
            display: block;
            text-align: center;
            padding: 100px 0;
            font-size: 20px;
            font-weight: 500;
            grid-column: 1 / -1;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
            border: 1px solid var(--border-color);
        }

        .video-card-row:hover {
            background-color: #F5F5F5;
        }

        .list-header {
            font-size: 13px;
            font-weight: 600;
            color: var(--subtle-text-color);
        }

        .list-header th {
            padding: 10px 12px;
            border-bottom: 2px solid #333;
            cursor: pointer;
        }

        .list-header th.active {
            background-color: var(--sorted-col-bg);
        }

        .header-item-content {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 5px;
        }

        .list-header th .arrow {
            opacity: 0.8;
        }

        .h-rank {
            width: 45px;
            text-align: center;
        }

        .h-info {
            text-align: left;
        }

        .h-stat {
            width: 110px;
            text-align: right;
        }

        .h-download {
            width: 100px;
            cursor: default;
            text-align: center;
        }

        .cell {
            vertical-align: middle;
            padding: 12px 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .download-cell {
            text-align: center;
        }

        .rank {
            text-align: center;
            font-size: 16px;
            font-weight: 600;
            color: var(--subtle-text-color);
        }

        .info-cell {
            display: flex;
            align-items: center;
            text-align: left;
        }

        .thumbnail-container {
            position: relative;
            flex-shrink: 0;
            width: 120px;
            height: 67px;
            border-radius: 6px;
            overflow: hidden;
        }

        .thumbnail-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .info-main {
            padding: 0 15px;
            min-width: 0;
        }

        .video-title {
            font-size: 16px;
            font-weight: 600;
            margin: 0 0 4px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .video-title a {
            color: var(--text-color);
            text-decoration: none;
        }

        .video-title a:hover {
            color: var(--primary-color);
        }

        .channel-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .channel-title {
            font-size: 14px;
            color: var(--subtle-text-color);
            cursor: pointer;
            text-decoration: none;
        }

        .stat {
            text-align: right;
            font-size: 15px;
        }

        .stat .rate {
            font-size: 0.9em;
            color: var(--secondary-color);
        }

        .download-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 34px;
            height: 34px;
        }

        .download-icon svg {
            width: 20px;
            height: 20px;
            fill: var(--subtle-text-color);
        }

        #recommend-tags-section {
            box-sizing: border-box;
            width: 100%;
        }

        .recommend-tags-container {
            position: relative;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            text-align: left;
        }

        .recommend-tags-container h4 {
            margin: 0 0 10px 0;
            font-size: 15px;
            font-weight: 600;
        }

        .recommend-tags-container .tag {
            display: inline-block;
            cursor: pointer;
            transition: background-color 0.2s;
            background: #eef2f6;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin: 2px;
        }

        .recommend-tags-container .tag:hover {
            background-color: #dcebfd;
        }

        .tag-copy-notification {
            position: fixed;
            background-color: white;
            color: var(--text-color);
            padding: 8px 12px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            font-size: 13px;
            font-weight: 500;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            transform: translateY(10px);
            pointer-events: none;
        }

        .tag-copy-notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        .action-buttons {
            position: absolute;
            right: 15px;
            bottom: 10px;
            display: flex;
            gap: 10px;
        }

        .secondary-action-btn {
            font-size: 12px;
            padding: 5px 10px;
            font-weight: 500;
            color: var(--subtle-text-color);
            background-color: transparent;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .secondary-action-btn:hover {
            background-color: #eef2f6;
            color: var(--text-color);
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin-top: 25px;
        }

        .pagination button {
            font-size: 14px;
            padding: 6px 12px;
            min-width: auto;
            height: auto;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal-overlay.show {
            display: flex;
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            text-align: left;
            width: 90%;
            max-width: 600px;
            transform: translateY(-20px);
            transition: transform 0.3s;
            margin: auto;
            display: flex;
            flex-direction: column;
            max-height: 85vh;
        }

        .modal-content[data-scrollable="true"] {
            padding: 0;
        }

        .modal-header {
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }

        .guide-content {
            padding: 20px 30px;
            overflow-y: auto;
            flex-grow: 1;
            min-height: 0;
        }

        .modal-body {
            padding: 20px 30px 30px;
        }

        .modal-header h3 {
            margin: 0;
            flex-grow: 1;
        }

        .modal-header .modal-close-btn {
            position: static;
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0);
        }

        .modal-content h3 {
            margin-top: 0;
            font-weight: 700;
            font-size: 22px;
            text-align: center;
        }

        .modal-content p {
            margin-bottom: 20px;
            color: var(--subtle-text-color);
            line-height: 1.6;
        }

        #api-key-error {
            color: var(--error-color);
            font-size: 14px;
            margin-bottom: 10px;
            display: none;
            font-weight: 500;
            text-align: center;
        }

        .modal-content p a {
            font-weight: 500;
        }

        .modal-content input {
            width: 100%;
            margin-bottom: 20px;
            box-sizing: border-box;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .modal-close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #888;
            padding: 0;
            line-height: 1;
        }

        .modal-content textarea {
            width: 100%;
            box-sizing: border-box;
            min-height: 100px;
            padding: 10px;
            font-family: inherit;
            font-size: 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            resize: vertical;
            margin-bottom: 15px;
        }

        #char-counter {
            font-size: 12px;
            color: var(--subtle-text-color);
            text-align: right;
            display: block;
            margin-top: -10px;
            margin-bottom: 10px;
        }

        .guide-step {
            margin-bottom: 25px;
        }

        .guide-step h4,
        .guide-section h4 {
            font-size: 18px;
            font-weight: 600;
            margin-top: 20px;
            margin-bottom: 8px;
        }

        .guide-step p,
        .guide-section p {
            margin-top: 0;
        }

        .guide-step b,
        .guide-step strong,
        .guide-section code {
            color: var(--primary-color);
        }

        .guide-image {
            width: 100%;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            margin-top: 15px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .guide-image:hover {
            transform: scale(1.02);
        }

        .page-footer {
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid var(--border-color);
            font-size: 13px;
            color: var(--subtle-text-color);
            flex-shrink: 0;
            width: 100%;
            box-sizing: border-box;
            background-color: var(--bg-color);
        }

        .page-footer a {
            color: var(--subtle-text-color);
            font-weight: 500;
            text-decoration: none;
        }

        .page-footer a:hover {
            text-decoration: underline;
            color: var(--primary-color);
        }

        .page-footer .separator {
            margin: 0 10px;
        }

        .notification-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            z-index: 2000;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            opacity: 0;
            transition: opacity 0.2s ease, transform 0.2s ease;
            visibility: hidden;
            pointer-events: none;
        }

        .notification-modal.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            visibility: visible;
        }

        .notification-modal.success {
            background-color: var(--primary-color);
        }

        .notification-modal.error {
            background-color: var(--error-color);
        }

        .error-modal-content {
            background-color: #f8f9fa;
            color: var(--text-color);
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 480px;
            text-align: center;
            border-top: 5px solid var(--error-color);
            overflow: hidden;
        }

        .error-modal-header {
            padding: 20px 30px 10px;
        }

        .error-modal-header .error-icon {
            font-size: 40px;
            line-height: 1;
        }

        .error-modal-header h3 {
            margin: 10px 0 0 0;
            font-size: 22px;
            color: var(--text-color);
        }

        .error-modal-body {
            padding: 0 30px 20px;
        }

        .error-modal-body p {
            margin: 0;
            font-size: 16px;
            line-height: 1.7;
            color: var(--subtle-text-color);
        }

        .error-modal-footer {
            background-color: #e9ecef;
            padding: 15px 30px;
        }

        .error-modal-footer button {
            width: 100%;
            padding: 12px;
            font-size: 16px;
        }

        .custom-tooltip {
            position: absolute;
            background-color: #fff;
            color: #212529;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-width: 300px;
            font-size: 13px;
            line-height: 1.6;
            z-index: 1010;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            pointer-events: none;
            border: 1px solid #e5e7eb;
            transform: translateY(5px);
        }

        .custom-tooltip.show {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }

        .custom-tooltip .tooltip-arrow {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #fff;
            transform: rotate(45deg);
            bottom: -6px;
            left: 50%;
            margin-left: -5px;
            border-bottom: 1px solid #e5e7eb;
            border-right: 1px solid #e5e7eb;
        }

        #tooltip-content h4 {
            margin: 0 0 8px 0;
            font-size: 14px;
            font-weight: 600;
            color: #212529;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 5px;
            text-align: center;
        }

        #tooltip-content p {
            margin: 0 0 4px 0;
            color: #6a6a6a;
        }

        #image-lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            cursor: pointer;
        }

        #image-lightbox.show {
            display: flex;
        }

        #image-lightbox img {
            max-width: 90vw;
            max-height: 90vh;
            object-fit: contain;
            cursor: default;
        }

        #metrics-guide-modal .guide-content {
            text-align: center;
        }
    </style>
</head>

<body>
    <div id="image-lightbox" onclick="closeImageLightbox()">
        <img src="" alt="í™•ëŒ€ëœ ê°€ì´ë“œ ì´ë¯¸ì§€" onclick="event.stopPropagation()">
    </div>
    <div id="custom-tooltip" class="custom-tooltip">
        <div id="tooltip-content"></div>
        <div class="tooltip-arrow"></div>
    </div>
    <div id="notification-modal" class="notification-modal"></div>
    <div id="error-modal" class="modal-overlay">
        <div class="error-modal-content">
            <div class="error-modal-header">
                <div class="error-icon">âš ï¸</div>
                <h3>ì˜¤ë¥˜ ë°œìƒ</h3>
            </div>
            <div class="error-modal-body">
                <p id="error-modal-message"></p>
            </div>
            <div class="error-modal-footer">
                <button onclick="closeErrorModal()">í™•ì¸</button>
            </div>
        </div>
    </div>
    <div id="api-key-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>API í‚¤ ë“±ë¡</h3>
                <button class="modal-close-btn" onclick="closeApiKeyModal()">Ã—</button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>YouTube Data API v3 í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.<br>í‚¤ ë°œê¸‰ ë°©ë²•ì€ <a href="#" onclick="openApiGuide(event)">ê°€ì´ë“œ í˜ì´ì§€</a>ë¥¼
                    ì°¸ê³ í•˜ì„¸ìš”.</p>
                <p id="api-key-error"></p>
                <input type="password" id="apiKeyInput" placeholder="API í‚¤ë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”">
                <div class="modal-actions">
                    <button class="button-secondary" onclick="closeApiKeyModal()">ë‹«ê¸°</button>
                    <button onclick="saveApiKey()">ì €ì¥</button>
                </div>
            </div>
        </div>
    </div>
    <div id="api-guide-modal" class="modal-overlay">
        <div class="modal-content" data-scrollable="true">
            <div class="modal-header">
                <h3>ğŸ”‘ YouTube API í‚¤ ë°œê¸‰ ë°©ë²•</h3>
                <button class="modal-close-btn" onclick="closeApiGuide()">Ã—</button>
            </div>
            <div class="guide-content">
                <div class="guide-step">
                    <h4>1ë‹¨ê³„: Google Cloud Platform ì ‘ì† ë° ì•½ê´€ ë™ì˜</h4>
                    <p><a href="https://console.cloud.google.com/apis/api/youtube.googleapis.com/metrics?inv=1&invt=Ab1erg&project=ttsproject"
                            target="_blank">Google Cloud Platform ë§í¬</a>ì— ì ‘ì†í•˜ì—¬ ë¡œê·¸ì¸ í›„, ì„œë¹„ìŠ¤ ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.</p><img
                        src="{{ url_for('static', filename='images/guide_step_1.png') }}" alt="1ë‹¨ê³„: GCP ì ‘ì†"
                        class="guide-image" onclick="enlargeImage(this)">
                </div>
                <div class="guide-step">
                    <h4>2ë‹¨ê³„: API ê²€ìƒ‰</h4>
                    <p>ë¡œê·¸ì¸ í›„, í™”ë©´ ìƒë‹¨ì˜ ê²€ìƒ‰ì°½ì— 'youtube api'ë¥¼ ê²€ìƒ‰í•˜ê³  ê²°ê³¼ì—ì„œ <b>'YouTube Data API v3'</b>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p><img
                        src="{{ url_for('static', filename='images/guide_step_2.png') }}" alt="2ë‹¨ê³„: API ê²€ìƒ‰"
                        class="guide-image" onclick="enlargeImage(this)">
                </div>
                <div class="guide-step">
                    <h4>3ë‹¨ê³„: API ì‚¬ìš© ì„¤ì •</h4>
                    <p>'YouTube Data API v3' í˜ì´ì§€ì—ì„œ íŒŒë€ìƒ‰ <b>'ì‚¬ìš©'</b> ë²„íŠ¼ì„ ì„ íƒí•˜ì—¬ APIë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤.</p><img
                        src="{{ url_for('static', filename='images/guide_step_3.png') }}" alt="3ë‹¨ê³„: API ì‚¬ìš© ì„¤ì •"
                        class="guide-image" onclick="enlargeImage(this)">
                </div>
                <div class="guide-step">
                    <h4>4ë‹¨ê³„: API í‚¤ ìƒì„±</h4>
                    <p>ì¢Œì¸¡ ë©”ë‰´ì—ì„œ <b>'ì‚¬ìš©ì ì¸ì¦ ì •ë³´'</b>ë¥¼ ëˆ„ë¥¸ í›„, ìƒë‹¨ì˜ <b>'+ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸°'</b>ë¥¼ í´ë¦­í•˜ê³  <b>'API í‚¤'</b>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p>
                    <img src="{{ url_for('static', filename='images/guide_step_4.png') }}" alt="4ë‹¨ê³„: API í‚¤ ìƒì„±"
                        class="guide-image" onclick="enlargeImage(this)">
                </div>
                <div class="guide-step">
                    <h4>5ë‹¨ê³„: API í‚¤ ë³µì‚¬ ë° ë³´ê´€</h4>
                    <p>ìƒì„±ëœ API í‚¤ê°€ íŒì—…ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ë©´, ìš°ì¸¡ì˜ ì•„ì´ì½˜ì„ ëˆŒëŸ¬ í‚¤ë¥¼ ë³µì‚¬í•œ í›„ ì•ˆì „í•œ ê³³ì— ë”°ë¡œ ì €ì¥í•´ë‘ì„¸ìš”.<br><strong>âš ï¸ ê²½ê³ : ì´ API í‚¤ëŠ” ë¹„ë°€ë²ˆí˜¸ì™€
                            ê°™ìŠµë‹ˆë‹¤. ì ˆëŒ€ë¡œ ì™¸ë¶€ì— ìœ ì¶œë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”!</strong></p><img
                        src="{{ url_for('static', filename='images/guide_step_5.png') }}" alt="5ë‹¨ê³„: API í‚¤ ë³µì‚¬"
                        class="guide-image" onclick="enlargeImage(this)">
                </div>
                <div class="guide-step">
                    <h4>6ë‹¨ê³„: API í‚¤ ì„¤ì • í˜ì´ì§€ë¡œ ì´ë™</h4>
                    <p>íŒì—…ì„ ë‹«ê³  'ì‚¬ìš©ì ì¸ì¦ ì •ë³´' í˜ì´ì§€ì— ë³´ì´ëŠ” <b>'API í‚¤ 1ê°œ'</b> ë²„íŠ¼ì„ ì„ íƒí•˜ì—¬ í‚¤ ì„¤ì • í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p><img
                        src="{{ url_for('static', filename='images/guide_step_6.png') }}" alt="6ë‹¨ê³„: API í‚¤ ì„¤ì • ì´ë™"
                        class="guide-image" onclick="enlargeImage(this)">
                </div>
                <div class="guide-step">
                    <h4>7ë‹¨ê³„: IP ì£¼ì†Œë¡œ í‚¤ ì œí•œ (ë³´ì•ˆ ê°•í™”)</h4>
                    <p> 'í‚¤ ì œí•œì‚¬í•­' ì„¹ì…˜ì—ì„œ <b>'IP ì£¼ì†Œ'</b>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ê·¸ í›„ <b>'+ í•­ëª© ì¶”ê°€'</b> ë²„íŠ¼ì„ ëˆŒëŸ¬ ìì‹ ì˜ ê³µì¸ IP ì£¼ì†Œë¥¼ ì…ë ¥í•˜ê³  'ì™„ë£Œ'ë¥¼
                        ëˆ„ë¦…ë‹ˆë‹¤.<br>(ë‚´ IP ì£¼ì†Œë¥¼ ëª¨ë¥¼ ê²½ìš°: <a href="https://www.whatismyip.com/" target="_blank">ì—¬ê¸°ë¥¼ í´ë¦­í•´ì„œ í™•ì¸</a>)
                    </p><img src="{{ url_for('static', filename='images/guide_step_7.png') }}" alt="7ë‹¨ê³„: IP ì£¼ì†Œ ì œí•œ"
                        class="guide-image" onclick="enlargeImage(this)">
                </div>
                <div class="guide-step">
                    <h4>8ë‹¨ê³„: ì €ì¥ ë° ì˜¤ë¥˜ í•´ê²°</h4>
                    <p>í˜ì´ì§€ í•˜ë‹¨ì˜ <b>'ì €ì¥'</b> ë²„íŠ¼ì„ ëˆŒëŸ¬ ëª¨ë“  ì„¤ì •ì„ ë§ˆì¹©ë‹ˆë‹¤.<br>ë§Œì•½ ì´ í‚¤ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ê²€ìƒ‰ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´, ëŒ€ë¶€ë¶„ 7ë‹¨ê³„ì˜ <b>IP ì£¼ì†Œê°€ ì •í™•í•˜ì§€
                            ì•Šê¸° ë•Œë¬¸</b>ì…ë‹ˆë‹¤. IP ì£¼ì†Œë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ê³  ì •í™•íˆ ì…ë ¥í•œ í›„ ì €ì¥í•´ì£¼ì„¸ìš”.</p><img
                        src="{{ url_for('static', filename='images/guide_step_8.png') }}" alt="8ë‹¨ê³„: ì €ì¥ ë° ì˜¤ë¥˜ í•´ê²°"
                        class="guide-image" onclick="enlargeImage(this)">
                </div>

                <hr style="margin: 30px 0;">
                <div class="guide-section">
                    <h4 style="color: var(--error-color);">ğŸš¨ API í‚¤ ì‚¬ìš© ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë‚˜ìš”?</h4>
                    <p>API í‚¤ë¥¼ ì •í™•íˆ ì…ë ¥í–ˆëŠ”ë°ë„ '403 Forbidden' ë˜ëŠ” 'ì¸ì¦ ì˜¤ë¥˜' ë©”ì‹œì§€ê°€ í‘œì‹œëœë‹¤ë©´, ëŒ€ë¶€ë¶„ ì•„ë˜ 4ê°€ì§€ ê²½ìš° ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.</p>
                    <ol style="padding-left: 20px; line-height: 1.8; text-align: left;">
                        <li><strong>API ë¯¸ì‚¬ìš© ì„¤ì •:</strong> ê°€ì¥ í”í•œ ì‹¤ìˆ˜ì…ë‹ˆë‹¤. Google Cloudì—ì„œ 'YouTube Data API v3' ì‚¬ìš© ì„¤ì •ì„ í•˜ì§€ ì•Šì€
                            ê²½ìš°ì…ë‹ˆë‹¤. <a href="https://console.cloud.google.com/apis/library/youtube.googleapis.com"
                                target="_blank">API ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜ì´ì§€</a>ë¡œ ì´ë™í•˜ì—¬ 'ì‚¬ìš©' ë²„íŠ¼ì´ íŒŒë€ìƒ‰ìœ¼ë¡œ í™œì„±í™”ë˜ì–´ ìˆë‹¤ë©´ ê¼­ í´ë¦­í•´ì£¼ì„¸ìš”.</li>
                        <li><strong>IP ì£¼ì†Œ ë³€ê²½:</strong> API í‚¤ì— IP ì£¼ì†Œ ì œí•œì„ ì„¤ì •í•œ ê²½ìš°, í˜„ì¬ ì ‘ì†í•œ ê³³ì˜ IPê°€ ë°”ë€Œì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a
                                href="https://console.cloud.google.com/apis/credentials" target="_blank">ì‚¬ìš©ì ì¸ì¦ ì •ë³´
                                í˜ì´ì§€</a>ì—ì„œ í˜„ì¬ IPë¥¼ ëª©ë¡ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.</li>
                        <li><strong>ì‚¬ìš©ëŸ‰(ì¿¼í„°) ì´ˆê³¼:</strong> í•˜ë£¨ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì–‘ì„ ëª¨ë‘ ì†Œì§„í•œ ê²½ìš°ì…ë‹ˆë‹¤. í• ë‹¹ëŸ‰ì€ ë³´í†µ <strong>í•œêµ­ ì‹œê°„ ê¸°ì¤€ ë§¤ì¼ ì˜¤í›„
                                5ì‹œê²½ì— ì´ˆê¸°í™”</strong>ë©ë‹ˆë‹¤.</li>
                        <li><strong>ë‹¤ë¥¸ êµ¬ê¸€ ê³„ì • ì‚¬ìš©:</strong> ì—¬ëŸ¬ êµ¬ê¸€ ê³„ì •ì„ ì‚¬ìš©í•˜ì‹ ë‹¤ë©´, ì§€ê¸ˆ í”„ë¡œê·¸ë¨ì— ì…ë ¥í•œ í‚¤ê°€ ì–´ë–¤ ê³„ì •ì˜ ì–´ë–¤ í”„ë¡œì íŠ¸ì—ì„œ ë°œê¸‰ë˜ì—ˆëŠ”ì§€ ë‹¤ì‹œ
                            í•œë²ˆ í™•ì¸í•´ë³´ì„¸ìš”.</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div id="metrics-guide-modal" class="modal-overlay">
        <div class="modal-content" data-scrollable="true">
            <div class="modal-header">
                <h3>ğŸ“Š ì§€í‘œ(LVR/CVR)ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</h3>
                <button class="modal-close-btn" onclick="closeMetricsGuide()">Ã—</button>
            </div>
            <div class="guide-content">
                <div class="guide-section">
                    <h4>ì¢‹ì•„ìš” ë¹„ìœ¨ (LVR: Like to View Ratio)</h4>
                    <p><b>ê³„ì‚°ì‹:</b> <code>(ì¢‹ì•„ìš” ìˆ˜ / ì´ì¡°íšŒìˆ˜) * 100</code> <br>ì½˜í…ì¸  ë§Œì¡±ë„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í•µì‹¬ ì§€í‘œ.</p>
                </div>
                <div class="guide-section">
                    <h4>ëŒ“ê¸€ ë¹„ìœ¨ (CVR: Comment to View Ratio)</h4>
                    <p><b>ê³„ì‚°ì‹:</b> <code>(ëŒ“ê¸€ ìˆ˜ / ì´ì¡°íšŒìˆ˜) * 100</code> <br>'ì ê·¹ì ì¸ ì°¸ì—¬ë„'ë¥¼ ë³´ì—¬ì£¼ëŠ” ì§€í‘œ.</p>
                </div>
            </div>
        </div>
    </div>
    <div id="feedback-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>í”¼ë“œë°± ë³´ë‚´ê¸°</h3>
                <button class="modal-close-btn" onclick="closeFeedbackModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <p>ì„œë¹„ìŠ¤ ê°œì„ ì„ ìœ„í•œ ì†Œì¤‘í•œ ì˜ê²¬ì„ ë‚¨ê²¨ì£¼ì„¸ìš”.</p>
                <textarea id="feedback-message" placeholder="ì—¬ê¸°ì— ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." maxlength="1000"
                    oninput="updateCharCounter()"></textarea>
                <div id="char-counter">0 / 1000</div>
                <div class="modal-actions">
                    <button class="button-secondary" onclick="closeFeedbackModal()">ë‹«ê¸°</button>
                    <button onclick="submitFeedback()">ì „ì†¡</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <h2><a href="/">{% if settings.logo_path %}<img src="{{ url_for('static', filename=settings.logo_path) }}"
                    alt="Logo">{% else %}{{ settings.title_text }}{% endif %}</a></h2>
        <div class="search-container">
            <div class="controls">
                <input id="query" type="text" />
                <button id="search-btn">ê²€ìƒ‰</button>
                <button id="api-btn">API í‚¤ ë“±ë¡</button>
            </div>
            <div id="api-explainer-container"></div>
            <div id="search-history" class="search-history"></div>
        </div>
        <div id="category-filters-container" class="category-filters"></div>
        <div class="filter-controls">
            <div class="right">
                <span>í•„í„°:</span>
                <select id="daysFilter" onchange="renderData()">
                    <option value="" disabled selected>ê¸°ê°„</option>
                    <option value="0">ì „ì²´</option>
                    <option value="0.042">1ì‹œê°„ ì „</option>
                    <option value="1">1ì¼ ì „</option>
                    <option value="3">3ì¼ ì „</option>
                    <option value="7">7ì¼ ì „</option>
                    <option value="15">15ì¼ ì „</option>
                    <option value="30">30ì¼ ì „</option>
                </select>
                <select id="subscriberFilter" onchange="renderData()">
                    <option value="" disabled selected>êµ¬ë…ì ìˆ˜</option>
                    <option value="0">ì „ì²´</option>
                    <option value="1000">1ì²œëª… ë¯¸ë§Œ</option>
                    <option value="5000">5ì²œëª… ë¯¸ë§Œ</option>
                    <option value="10000">1ë§Œëª… ë¯¸ë§Œ</option>
                    <option value="30000">3ë§Œëª… ë¯¸ë§Œ</option>
                    <option value="50000">5ë§Œëª… ë¯¸ë§Œ</option>
                    <option value="100000">10ë§Œëª… ë¯¸ë§Œ</option>
                </select>
                <select id="videoTypeFilter" onchange="renderData()">
                    <option value="" disabled selected>ìœ í˜•</option>
                    <option value="all">ì „ì²´</option>
                    <option value="video">ë™ì˜ìƒ</option>
                    <option value="shorts">ì‡¼ì¸ </option>
                </select>
                <select id="itemsPerPage" onchange="changeItemsPerPage()">
                    <option value="" disabled selected>ê²€ìƒ‰ëŸ‰</option>
                    <option value="10">10ê°œì”©</option>
                    <option value="20">20ê°œì”©</option>
                    <option value="30">30ê°œì”©</option>
                    <option value="50">50ê°œì”©</option>
                </select>
                <button id="view-toggle-btn" onclick="toggleViewMode()"></button>
            </div>
        </div>
        <div id="recommend-tags-section" style="display: none;"></div>
        <div id="results-container"></div>
        <div id="pagination-controls" class="pagination"></div>
    </div>

    <footer class="page-footer">
        <span>ìœ íŠœë¸Œ ìƒìŠ¹ í‚¤ì›Œë“œ ë¶„ì„ê¸° v1.2</span>
        <span class="separator">|</span>
        <a href="#" onclick="openFeedbackModal(event)">í”¼ë“œë°± ë³´ë‚´ê¸°</a>
    </footer>

    <script>
        // âœ¨ --- ì „ì—­ ë³€ìˆ˜ ë° ì´ˆê¸° ì„¤ì • ---
        let allResults = [], searchHistory = [], currentPage = 1, itemsPerPage = 50;
        let sortConfig = { key: 'likeCount', direction: 'desc' };
        let currentView = 'list';
        let activeTooltipTarget = null;
        let currentHeaderTitle = 'ì˜ìƒ ì •ë³´';
        const viewIcons = { list: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3,14H7V10H3M3,19H7V15H3M3,9H7V5H3M9,14H21V10H9M9,19H21V15H9M9,9H21V5H9V9Z" /></svg>`, grid: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3,3V11H11V3M13,3V11H21V3M3,13V21H11V13M13,13V21H21V13" /></svg>` };
        const downloadIconSVG = `<svg viewBox="0 0 24 24" fill="var(--subtle-text-color)"><path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" /></svg>`;

        document.addEventListener('DOMContentLoaded', () => {
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            document.getElementById('search-btn').onclick = searchVideos;
            document.getElementById('api-btn').onclick = showApiKeyModal;
            document.getElementById('query').addEventListener('keydown', e => { if (e.key === 'Enter' && !e.target.disabled) searchVideos(); });
            document.getElementById('results-container').addEventListener('click', (event) => {
                const header = event.target.closest('th[data-sort]');
                if (header) {
                    setSort(header.dataset.sort);
                }
            });
            document.addEventListener('click', (event) => {
                if (activeTooltipTarget && !event.target.closest('.channel-title')) {
                    hideCustomTooltip();
                }
            });

            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê²€ìƒ‰ ê¸°ë¡ ë° ë·° ëª¨ë“œ ë¶ˆëŸ¬ì˜¤ê¸°
            try {
                searchHistory = JSON.parse(localStorage.getItem('youtubeSearchHistory') || '[]');
                if (!Array.isArray(searchHistory)) { searchHistory = []; }
            } catch (e) { searchHistory = []; }
            currentView = localStorage.getItem('youtubeSearchView') || 'list';

            updateApiKeyUI();
        });

        // âœ¨ --- ëª¨ë‹¬ ì œì–´ í•¨ìˆ˜ë“¤ ---
        function showModal(modalId) { document.getElementById(modalId)?.classList.add('show'); }
        function closeModal(modalId) { document.getElementById(modalId)?.classList.remove('show'); }

        function showApiKeyModal() { showModal('api-key-modal'); }
        function closeApiKeyModal() { closeModal('api-key-modal'); }
        function openApiGuide(event) { event.preventDefault(); showModal('api-guide-modal'); }
        function closeApiGuide() { closeModal('api-guide-modal'); }
        function openMetricsGuide(event) { event.preventDefault(); showModal('metrics-guide-modal'); }
        function closeMetricsGuide() { closeModal('metrics-guide-modal'); }
        function openFeedbackModal(event) { event.preventDefault(); showModal('feedback-modal'); }
        function closeFeedbackModal() { closeModal('feedback-modal'); }

        function showNotification(message, type = 'success') {
            const notif = document.getElementById('notification-modal');
            if (!notif) return;
            notif.textContent = message;
            notif.className = `notification-modal ${type}`;
            notif.classList.add('show');
            setTimeout(() => {
                notif.classList.remove('show');
            }, 2000);
        }

        function showErrorModal(message) {
            document.getElementById('error-modal-message').innerHTML = message;
            showModal('error-modal');
        }
        function closeErrorModal() { closeModal('error-modal'); }

        // âœ¨ --- í•µì‹¬ ê¸°ëŠ¥ í•¨ìˆ˜ë“¤ ---
        async function saveApiKey() {
            const apiKey = document.getElementById('apiKeyInput').value.trim();
            const errorEl = document.getElementById('api-key-error');
            if (!apiKey) {
                errorEl.textContent = 'API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                errorEl.style.display = 'block';
                return;
            }
            errorEl.style.display = 'none';

            try {
                const response = await fetch('/validate_key', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ apiKey: apiKey })
                });
                const result = await response.json();
                if (response.ok && result.success) {
                    sessionStorage.setItem('youtubeApiKey', apiKey);
                    showNotification('API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    closeApiKeyModal();
                    updateApiKeyUI();
                } else {
                    errorEl.textContent = result.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
                    errorEl.style.display = 'block';
                }
            } catch (e) {
                errorEl.textContent = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
                errorEl.style.display = 'block';
            }
        }

        function updateApiKeyUI() {
            const apiKey = sessionStorage.getItem('youtubeApiKey');
            const queryInput = document.getElementById('query');
            const searchBtn = document.getElementById('search-btn');
            const apiBtn = document.getElementById('api-btn');
            const explainerContainer = document.getElementById('api-explainer-container');
            const searchHistoryEl = document.getElementById('search-history');

            if (apiKey) {
                queryInput.disabled = false;
                searchBtn.disabled = false;
                queryInput.placeholder = 'ë¶„ì„í•˜ê³  ì‹¶ì€ í‚¤ì›Œë“œ ì…ë ¥';
                apiBtn.textContent = 'í‚¤ ë³€ê²½';
                explainerContainer.style.display = 'none';
                searchHistoryEl.style.display = 'block';
                renderSearchHistory();
                if (document.getElementById('results-container').innerHTML === '') {
                    initializeTrendingView();
                }
            } else {
                queryInput.disabled = true;
                searchBtn.disabled = true;
                queryInput.placeholder = 'API í‚¤ë¥¼ ë¨¼ì € ë“±ë¡í•´ì£¼ì„¸ìš”.';
                apiBtn.textContent = 'API í‚¤ ë“±ë¡';
                explainerContainer.style.display = 'block';
                explainerContainer.innerHTML = `<div class="api-explainer"><p><strong>ì´ íˆ´ì€ YouTubeì˜ ë°©ëŒ€í•œ ë°ì´í„°ì— ì§ì ‘ ì ‘ê·¼í•˜ì—¬ ë¶„ì„ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</strong></p><p>ì•ˆì •ì ì´ê³  ê³µì •í•œ ì„œë¹„ìŠ¤ ì´ìš©ì„ ìœ„í•´, <strong>ì‚¬ìš©ì ê°ìì˜ API í‚¤</strong>ë¥¼ í†µí•´ ìœ íŠœë¸Œì— ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><p style="margin-top: 15px;"><a href="#" onclick="openApiGuide(event)" style="font-weight: 600;">API í‚¤ ë°œê¸‰ ê°€ì´ë“œ ë³´ê¸°</a></p></div>`;
                document.getElementById('results-container').innerHTML = '';
                initializeTrendingView();
            }
            applyViewMode();
        }

        function processVideoData(videos) {
            const now = new Date();
            videos.forEach(v => {
                v.viewCount = Number(v.viewCount || 0);
                v.likeCount = Number(v.likeCount || 0);
                v.commentCount = Number(v.commentCount || 0);
                const published = new Date(v.publishedAt);
                const daysSincePublication = Math.max(1, (now - published) / 86400000);
                v.dailyAverageViews = Math.round(v.viewCount / daysSincePublication);
                v.lvr = v.viewCount > 0 ? ((v.likeCount / v.viewCount) * 100).toFixed(2) : '0.00';
                v.cvr = v.viewCount > 0 ? ((v.commentCount / v.viewCount) * 100).toFixed(2) : '0.00';
            });
            return videos;
        }

        async function initializeTrendingView() {
            const categoryFiltersContainer = document.getElementById('category-filters-container');
            categoryFiltersContainer.style.display = 'flex';
            try {
                const res = await fetch('/get_categories');
                if (!res.ok) throw new Error((await res.json()).error || 'ì¹´í…Œê³ ë¦¬ ë¡œë”© ì‹¤íŒ¨');
                const data = await res.json();
                let buttonsHTML = `<button class="category-btn active" onclick="loadTrendingVideos('0')">#ì „ì²´</button>`;
                data.categories.forEach(cat => {
                    buttonsHTML += `<button class="category-btn" onclick="loadTrendingVideos('${cat.id}')">#${cat.snippet.title}</button>`;
                });
                categoryFiltersContainer.innerHTML = buttonsHTML;
                loadTrendingVideos('0');
            } catch (error) {
                categoryFiltersContainer.innerHTML = `<p style="font-size:14px; color:var(--error-color); text-align:center; width:100%;">${error.message}</p>`;
            }
        }

        async function loadTrendingVideos(categoryId) {
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.category-btn[onclick="loadTrendingVideos('${categoryId}')"]`)?.classList.add('active');
            const resultsContainer = document.getElementById('results-container');
            resultsContainer.innerHTML = `<div class="loader"><div class="loader-spinner"></div>ì¸ê¸° ë™ì˜ìƒ ë¡œë”© ì¤‘...</div>`;
            document.querySelector('.filter-controls').style.display = 'none';
            document.getElementById('recommend-tags-section').style.display = 'none';
            currentHeaderTitle = 'ì¸ê¸° ê¸‰ìƒìŠ¹ ë™ì˜ìƒ';
            try {
                const res = await fetch(`/trending?category=${categoryId}`);
                const data = await res.json();
                if (!res.ok) throw new Error(data.error || 'ì¸ê¸° ë™ì˜ìƒ ë¡œë”© ì‹¤íŒ¨');
                allResults = processVideoData(data.videos || []);
                currentPage = 1;
                renderData();
            } catch (error) {
                showErrorModal(error.message);
                resultsContainer.innerHTML = '';
            }
        }

        async function searchVideos() {
            const query = document.getElementById("query").value.trim();
            const apiKey = sessionStorage.getItem('youtubeApiKey');
            const recommendSection = document.getElementById('recommend-tags-section');
            if (!apiKey) { showApiKeyModal(); return; }
            if (!query) { showNotification("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.", "error"); return; }
            updateSearchHistory(query);
            currentPage = 1;
            allResults = [];
            document.getElementById('category-filters-container').style.display = 'none';
            recommendSection.style.display = 'none';
            document.getElementById('results-container').innerHTML = `<div class="loader"><div class="loader-spinner"></div>ê²€ìƒ‰ ì¤‘...</div>`;
            currentHeaderTitle = 'ì˜ìƒ ì •ë³´';
            try {
                const res = await fetch(`/search?q=${encodeURIComponent(query)}&apiKey=${apiKey}`);
                const data = await res.json();
                if (!res.ok) throw new Error(data.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì„œë²„ ì˜¤ë¥˜');
                allResults = processVideoData(data.videos || []);
                if (allResults.length === 0) {
                    document.getElementById('results-container').innerHTML = `<div class="message">ğŸ˜¢ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>`;
                } else {
                    document.querySelector('.filter-controls').style.display = 'flex';
                    if (data.recommended_tags && data.recommended_tags.length > 0) {
                        let tagsHTML = `<h4>ğŸ’¡ ì¶”ì²œ íƒœê·¸ (í´ë¦­í•˜ì—¬ ë³µì‚¬)</h4><div>`;
                        data.recommended_tags.forEach(tag => {
                            tagsHTML += `<span class="tag" onclick="copyTagToClipboard(event, '${tag.replace(/'/g, "\\'")}')">${tag}</span>`;
                        });
                        tagsHTML += `</div>
                        <div class="action-buttons">
                            <button class="secondary-action-btn" onclick="openMetricsGuide(event)">ğŸ“Š ì§€í‘œ ë¶„ì„</button>
                            <button class="secondary-action-btn" onclick="downloadCSV()">ğŸ“„ CSV ë‹¤ìš´ë¡œë“œ</button>
                        </div>`;
                        recommendSection.innerHTML = `<div class="recommend-tags-container">${tagsHTML}</div>`;
                        recommendSection.style.display = 'block';
                    }
                    renderData();
                }
            } catch (error) {
                showErrorModal(error.message);
                document.getElementById('results-container').innerHTML = '';
            }
        }

        // âœ¨ --- ë Œë”ë§ ë° UI í—¬í¼ í•¨ìˆ˜ë“¤ ---
        function buildAdHTML() {
            const adContent = `<div class="ad-container">ê´‘ê³  ì˜ì—­</div>`;
            if (currentView === 'list') {
                return `<tr class="ad-row"><td colspan="7" class="ad-cell">${adContent}</td></tr>`;
            } else {
                return `<div class="ad-card">${adContent}</div>`;
            }
        }

        function renderData() {
            const days = parseFloat(document.getElementById('daysFilter').value) || 0;
            const subscriberLimit = parseInt(document.getElementById('subscriberFilter').value, 10) || 0;
            const videoType = document.getElementById('videoTypeFilter').value || 'all';
            const filtered = allResults.filter(v => {
                const dateFilter = !days || (new Date() - new Date(v.publishedAt)) / 86400000 <= days;
                const subFilter = !subscriberLimit || (v.channelSubscriberCount != null && v.channelSubscriberCount < subscriberLimit);
                let videoTypeFilter = videoType === 'all';
                if (videoType !== 'all') {
                    const duration = parseISO8601Duration(v.duration);
                    if (videoType === 'shorts') videoTypeFilter = duration > 0 && duration <= 60;
                    else if (videoType === 'video') videoTypeFilter = duration > 60;
                }
                return dateFilter && subFilter && videoTypeFilter;
            });
            const sorted = [...filtered].sort((a, b) => {
                if (sortConfig.key === 'publishedAt') {
                    return sortConfig.direction === 'asc' ? new Date(a.publishedAt) - new Date(b.publishedAt) : new Date(b.publishedAt) - new Date(a.publishedAt);
                }
                return sortConfig.direction === 'asc' ? a[sortConfig.key] - b[sortConfig.key] : b[sortConfig.key] - a[sortConfig.key];
            });
            itemsPerPage = parseInt(document.getElementById('itemsPerPage').value, 10) || 50;
            const paginated = sorted.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
            const container = document.getElementById('results-container');
            container.innerHTML = '';
            if (paginated.length === 0) {
                container.innerHTML = `<div class="message">ğŸ˜¢ í•„í„° ì¡°ê±´ì— ë§ëŠ” ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>`;
            } else {
                if (currentView === 'list') {
                    container.innerHTML = buildListHeader(currentHeaderTitle);
                    const tableBody = container.querySelector('tbody');
                    paginated.forEach((v, i) => {
                        tableBody.insertAdjacentHTML('beforeend', buildCardHTML(v, (currentPage - 1) * itemsPerPage + i + 1));
                        if ((i + 1) % 5 === 0 && (i + 1) < paginated.length) {
                            tableBody.insertAdjacentHTML('beforeend', buildAdHTML());
                        }
                    });
                    if (paginated.length > 0) tableBody.insertAdjacentHTML('beforeend', buildAdHTML());
                } else {
                    paginated.forEach((v, i) => {
                        container.insertAdjacentHTML('beforeend', buildCardHTML(v, (currentPage - 1) * itemsPerPage + i + 1));
                        if ((i + 1) % 5 === 0 && (i + 1) < paginated.length) {
                            container.insertAdjacentHTML('beforeend', buildAdHTML());
                        }
                    });
                    if (paginated.length > 0) container.insertAdjacentHTML('beforeend', buildAdHTML());
                }
            }
            addChannelClickListeners();
            renderPaginationControls(sorted.length);
        }

        function buildListHeader(title = 'ì˜ìƒ ì •ë³´') {
            const headers = [{ key: 'likeCount', label: 'ì¢‹ì•„ìš”' }, { key: 'commentCount', label: 'ëŒ“ê¸€' }, { key: 'viewCount', label: 'ì¡°íšŒìˆ˜' }, { key: 'publishedAt', label: 'ì—…ë¡œë“œ' }];
            let headerHTML = `<table class="results-table"><thead><tr class="list-header"><th class="h-rank">ìˆœìœ„</th><th class="h-info">${title}</th>`;
            headers.forEach(h => {
                const isActive = sortConfig.key === h.key;
                const arrow = isActive ? (sortConfig.direction === 'asc' ? 'â–²' : 'â–¼') : 'â–¼';
                headerHTML += `<th class="h-stat ${isActive ? 'active' : ''}" data-sort="${h.key}"><div class="header-item-content"><span>${h.label}</span><span class="arrow">${arrow}</span></div></th>`;
            });
            headerHTML += `<th class="h-download">ë‹¤ìš´ë¡œë“œ</th></tr></thead><tbody></tbody></table>`;
            return headerHTML;
        }

        function escapeHTML(str) {
            if (typeof str !== 'string') return '';
            return str.replace(/[&<>'"]/g, tag => ({
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                "'": '&#39;',
                '"': '&quot;'
            }[tag] || tag));
        }

        function buildCardHTML(v, rank) {
            const cleanedTitle = escapeHTML(v.title);
            const channelData = escapeHTML(JSON.stringify(v));
            const publishedDate = new Date(v.publishedAt);
            const formattedDate = `${publishedDate.getFullYear()}. ${publishedDate.getMonth() + 1}. ${publishedDate.getDate()}.`;
            const formattedDateShort = `${publishedDate.getMonth() + 1}ì›” ${publishedDate.getDate()}ì¼`;
            if (currentView === 'list') {
                return `<tr class="video-card-row"><td class="cell rank">${rank}</td><td class="cell info-cell"><div class="thumbnail-container"><a href="${v.videoUrl}" target="_blank"><img src="${v.thumbnail}" loading="lazy"></a></div><div class="info-main"><h3 class="video-title"><a href="${v.videoUrl}" target="_blank" title="${cleanedTitle}">${cleanedTitle}</a></h3><div class="channel-info"><div class="channel-title" data-channel="${channelData}">${escapeHTML(v.channel) || 'N/A'}</div></div></div></td><td class="cell stat"><strong>${v.likeCount.toLocaleString()}</strong><br><span class="rate">(${v.lvr}%)</span></td><td class="cell stat"><strong>${v.commentCount.toLocaleString()}</strong><br><span class="rate">(${v.cvr}%)</span></td><td class="cell stat"><strong>${v.viewCount.toLocaleString()}</strong><br><span class="rate">${v.dailyAverageViews.toLocaleString()}/ì¼</span></td><td class="cell stat"><strong>${formattedDate}</strong></td><td class="cell download-cell"><a href="#" class="download-icon" title="ì¸ë„¤ì¼ ë‹¤ìš´ë¡œë“œ" onclick="event.preventDefault(); downloadThumbnail('${v.thumbnail}', '${v.title.replace(/'/g, "\\'")}');">${downloadIconSVG}</a></td></tr>`;
            } else {
                return `<div class="video-card"><div class="thumbnail-container"><a href="${v.videoUrl}" target="_blank"><img src="${v.thumbnail}" loading="lazy"></a><a href="#" class="download-icon-grid" title="ì¸ë„¤ì¼ ë‹¤ìš´ë¡œë“œ" onclick="event.preventDefault(); downloadThumbnail('${v.thumbnail}', '${v.title.replace(/'/g, "\\'")}');">${downloadIconSVG}</a></div><div class="info-main"><h3 class="video-title"><a href="${v.videoUrl}" target="_blank" title="${cleanedTitle}">${cleanedTitle}</a></h3><div class="channel-title" data-channel="${channelData}">${escapeHTML(v.channel)}</div></div><div class="stat-grid"><div><b>${v.viewCount.toLocaleString()}</b><br>ì¡°íšŒìˆ˜</div><div><b>${v.likeCount.toLocaleString()}</b><br>ì¢‹ì•„ìš”</div><div><b>${formattedDateShort}</b><br>ì—…ë¡œë“œ</div></div></div>`;
            }
        }

        function addChannelClickListeners() { document.querySelectorAll('.channel-title').forEach(el => { el.addEventListener('click', (event) => { event.stopPropagation(); try { const videoData = JSON.parse(event.currentTarget.dataset.channel); if (videoData) { showCustomTooltip(event.currentTarget, videoData); } } catch (e) { console.error("Could not parse video data for tooltip:", e, "Raw data:", event.currentTarget.dataset.channel); } }); }); }
        function setSort(key) { if (sortConfig.key === key) { sortConfig.direction = sortConfig.direction === 'desc' ? 'asc' : 'desc'; } else { sortConfig.key = key; sortConfig.direction = 'desc'; } currentPage = 1; renderData(); }
        function toggleViewMode() { currentView = (currentView === 'list') ? 'grid' : 'list'; localStorage.setItem('youtubeSearchView', currentView); applyViewMode(); if (allResults.length > 0) renderData(); }
        function applyViewMode() { const btn = document.getElementById('view-toggle-btn'); const container = document.getElementById('results-container'); if (container) { container.className = currentView === 'grid' ? 'grid-view' : ''; } if (btn) { btn.innerHTML = viewIcons[currentView]; btn.title = currentView === 'list' ? 'ê·¸ë¦¬ë“œ ë³´ê¸°' : 'ë¦¬ìŠ¤íŠ¸ ë³´ê¸°'; } }
        function renderPaginationControls(totalItems) { const pageCount = Math.ceil(totalItems / itemsPerPage); const controls = document.getElementById('pagination-controls'); controls.innerHTML = ''; if (pageCount <= 1) return; let buttonsHTML = ''; for (let i = 1; i <= pageCount; i++) { buttonsHTML += `<button class="${i === currentPage ? 'active' : ''}" onclick="goToPage(${i})">${i}</button>`; } controls.innerHTML = buttonsHTML; }
        function goToPage(page) { currentPage = page; renderData(); window.scrollTo(0, 0); }
        function changeItemsPerPage() { currentPage = 1; renderData(); }
        function parseISO8601Duration(t) { if (!t) return 0; var e = t.match(/PT(\d+H)?(\d+M)?(\d+S)?/); return e ? 3600 * (parseInt(e[1]) || 0) + 60 * (parseInt(e[2]) || 0) + (parseInt(e[3]) || 0) : 0 }
        function updateSearchHistory(query) { searchHistory = [query, ...searchHistory.filter(q => q !== query)].slice(0, 10); localStorage.setItem('youtubeSearchHistory', JSON.stringify(searchHistory)); renderSearchHistory(); }
        function renderSearchHistory() { const container = document.getElementById('search-history'); container.innerHTML = searchHistory.map(q => `<span class="history-tag" onclick="document.getElementById('query').value='${escapeHTML(q)}';searchVideos();">${escapeHTML(q)}</span>`).join(''); }
        function showCustomTooltip(targetElement, videoData) { const tooltip = document.getElementById("custom-tooltip"), tooltipContent = document.getElementById("tooltip-content"); if (tooltip && tooltipContent) { if (activeTooltipTarget === targetElement) return void hideCustomTooltip(); let e = `<h4>${escapeHTML(videoData.channel)} ì±„ë„ ì •ë³´</h4>`; e += `<p><b>êµ¬ë…ì:</b> ${null != videoData.channelSubscriberCount ? videoData.channelSubscriberCount.toLocaleString() + "ëª…" : "ë¹„ê³µê°œ"}</p>`, null != videoData.channelTotalVideos && (e += `<p><b>ì´ ì˜ìƒ:</b> ${videoData.channelTotalVideos.toLocaleString()}ê°œ</p>`, e += `<p><b>ì´ ì¡°íšŒìˆ˜:</b> ${videoData.channelTotalViews.toLocaleString()}íšŒ</p>`, e += `<p><b>ì˜ìƒë‹¹ í‰ê·  ì¡°íšŒìˆ˜:</b> ${videoData.channelAvgViews.toLocaleString()}íšŒ</p>`), tooltipContent.innerHTML = e; const o = targetElement.getBoundingClientRect(); tooltip.style.left = `${o.left + window.scrollX + o.width / 2}px`, tooltip.style.top = `${o.top + window.scrollY}px`, tooltip.style.transform = "translate(-50%, -100%)", tooltip.style.marginTop = "-10px", tooltip.classList.add("show"), activeTooltipTarget = targetElement } }
        function hideCustomTooltip() { const e = document.getElementById("custom-tooltip"); e && (e.classList.remove("show"), activeTooltipTarget = null) }
        function enlargeImage(imgElement) { const lightbox = document.getElementById("image-lightbox"); if (lightbox) { lightbox.querySelector("img").src = imgElement.src; lightbox.classList.add("show") } }
        function closeImageLightbox() { const e = document.getElementById("image-lightbox"); e && e.classList.remove("show") }

        // âœ¨ --- ëˆ„ë½ë˜ì—ˆë˜ ê¸°ëŠ¥ í•¨ìˆ˜ë“¤ ì¶”ê°€ ---
        function downloadCSV() {
            const dataToDownload = allResults;
            if (dataToDownload.length === 0) {
                showNotification("ë‹¤ìš´ë¡œë“œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.", "error");
                return;
            }
            const headers = ["ì œëª©", "ì±„ë„", "ì¢‹ì•„ìš”", "ëŒ“ê¸€", "ì´ì¡°íšŒìˆ˜", "ì—…ë¡œë“œ ë‚ ì§œ", "ì˜ìƒ URL"];
            let csvContent = headers.join(',') + '\n';
            dataToDownload.forEach((v) => {
                const title = `"${(v.title || '').replace(/"/g, '""')}"`;
                const channel = `"${(v.channel || '').replace(/"/g, '""')}"`;
                const publishedDate = new Date(v.publishedAt).toLocaleDateString('ko-KR');
                const row = [title, channel, v.likeCount, v.commentCount, v.viewCount, publishedDate, v.videoUrl];
                csvContent += row.join(',') + '\n';
            });
            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            const url = URL.createObjectURL(blob);
            link.setAttribute("href", url);
            link.setAttribute("download", "youtube_analysis_results.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function copyTagToClipboard(event, tagText) {
            navigator.clipboard.writeText(tagText).then(() => {
                const notif = document.createElement('div');
                notif.className = 'tag-copy-notification';
                notif.textContent = `'${tagText}' ë³µì‚¬ ì™„ë£Œ!`;
                document.body.appendChild(notif);
                const targetRect = event.target.getBoundingClientRect();

                // âœ¨ 'position: fixed'ì— ë§ê²Œ ìŠ¤í¬ë¡¤ ê°’ì„ ì œê±°í•˜ê³ , ì—¬ë°±ì„ ì¡°ì •í•˜ì—¬ ìœ„ì¹˜ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
                notif.style.left = `${targetRect.left}px`;
                notif.style.top = `${targetRect.top - notif.offsetHeight - 8}px`; // íƒœê·¸ ìœ„ë¡œ 8px ì—¬ë°±

                setTimeout(() => { notif.classList.add('show'); }, 10);
                setTimeout(() => {
                    notif.classList.remove('show');
                    setTimeout(() => { notif.remove(); }, 300);
                }, 1500);
            }, (err) => {
                showNotification('íƒœê·¸ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', "error");
            });
        }

        async function submitFeedback() {
            const message = document.getElementById('feedback-message').value.trim();
            if (!message) {
                showNotification('ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }
            try {
                const response = await fetch('/submit_feedback', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: `message=${encodeURIComponent(message)}`
                });
                const result = await response.json();
                if (result.success) {
                    showNotification(result.message || 'í”¼ë“œë°±ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!');
                    closeFeedbackModal();
                } else {
                    showNotification(result.error || 'í”¼ë“œë°± ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (e) {
                showNotification('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ë¡œ í”¼ë“œë°±ì„ ë³´ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
            }
        }

        function updateCharCounter() {
            const message = document.getElementById('feedback-message');
            const counter = document.getElementById('char-counter');
            counter.textContent = `${message.value.length} / ${message.maxLength}`;
        }

        async function downloadThumbnail(url, title) {
            try {
                const response = await fetch(url);
                const blob = await response.blob();
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `${title.replace(/[\\/:*?"<>|]/g, '')}_thumbnail.jpg`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } catch (e) {
                showNotification("ì¸ë„¤ì¼ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", "error");
            }
        }
    </script>
</body>

</html>